$(function(){function e(){function e(e,o,n){o.setPosition(n),o.setContent(e?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation."),o.open(t)}var i=new google.maps.LatLng(5.596617,-.223794);t=new google.maps.Map(document.getElementById("map"),{center:i,zoom:7}),n=new google.maps.InfoWindow,navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){var o={lat:e.coords.latitude,lng:e.coords.longitude};n.setPosition(o),n.setContent("Location found."),n.open(t),t.setCenter(o)},function(){e(!0,n,t.getCenter())}):e(!1,n,t.getCenter()),google.maps.event.addListener(t,"click",function(e){var n=e.latLng;r===!1?(r=new google.maps.Marker({position:n,map:t,draggable:!0}),google.maps.event.addListener(r,"dragend",function(e){o()})):r.setPosition(n),o()})}function o(){var e=r.getPosition();document.getElementById("lat").value=e.lat(),document.getElementById("lng").value=e.lng()}var t,n,i=getUrlParameter("token"),a=$("#product-form"),r=!1;$.getJSON(REMOTE_APPLICATION_URL+"/api/v2/subsubcategory.php",{token:i},function(e){var o=[];$.each(e,function(e,t){o.push("<option value='"+t.id+"'>"+t.name+"</option>")}),$("<select/>",{id:"subsubcategory_id",name:"subsubcategory_id",style:"width: 100%",html:o.join("")}).appendTo("#subsubcategory"),$("#subsubcategory_id").select2()}),a.submit(function(e){e.preventDefault();var o=new FormData(this);$.ajax({type:"POST",url:REMOTE_APPLICATION_URL+"/api/v2/product.php?token="+i,data:o,async:!1,cache:!1,contentType:!1,enctype:"multipart/form-data",processData:!1,statusCode:{413:function(){swal("Ooops!","The file size of your uploads are above the maximum requirement.","error")},415:function(){swal("Ooops!","The file types in your upload contains an unsupported media type.","error")}},success:function(e){swal({title:"Product Added!",text:"Successfully uploaded your product. Redirecting you to view the product...",icon:"success",timer:2e3,button:!1,closeOnClickOutside:!1}).then(function(){window.location.href="/product/view?id="+e.inserted_id+"&token="+i})},error:function(e){(413!==e||415!==e)&&swal("Ooops!","Product failed to upload to Husk Root. Please try again later.","error")}})}),google.maps.event.addDomListener(window,"load",e)});