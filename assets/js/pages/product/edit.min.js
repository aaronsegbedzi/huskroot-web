$(function(){var e,t=getUrlParameter("token"),o=getUrlParameter("id"),a=$("#product-form"),n=!1;$.getJSON(REMOTE_APPLICATION_URL+"/api/v2/subsubcategory.php",{token:t},function(e){var t=[];$.each(e,function(e,o){t.push("<option value='"+o.id+"'>"+o.name+"</option>")}),$("<select/>",{id:"subsubcategory_id",name:"subsubcategory_id",style:"width: 100%",html:t.join("")}).appendTo("#subsubcategory"),$("#subsubcategory_id").select2()}),$.getJSON(REMOTE_APPLICATION_URL+"/api/v2/product.php",{token:t,id:o},function(t){function o(){var o=new google.maps.LatLng(parseFloat(t.lat),parseFloat(t.lng));e=new google.maps.Map(document.getElementById("map"),{center:o,zoom:12}),n=new google.maps.Marker({position:o,map:e,title:"Your current product location.",draggable:!0}),google.maps.event.addListener(n,"dragend",function(e){a()}),google.maps.event.addListener(e,"click",function(t){var o=t.latLng;n===!1?n=new google.maps.Marker({position:o,map:e,title:"Your New Product Location."}):n.setPosition(o),a()})}function a(){var e=n.getPosition();document.getElementById("lat").value=e.lat(),document.getElementById("lng").value=e.lng()}$("#name").val(t.name),$("#price").val(t.price),$("#currency").val(t.currency),$("#unit").val(t.unit),$("#location").val(t.location),$("#description").val(t.description),$("#lat").val(t.lat),$("#lng").val(t.lng),$("#subsubcategory_id").val(t.subsubCategoryid).trigger("change"),google.maps.event.addDomListener(window,"load",o)}),a.submit(function(e){e.preventDefault();var a=new FormData(this);$.ajax({type:"POST",url:REMOTE_APPLICATION_URL+"/api/v2/product.php?id="+o+"&update=true&token="+t,data:a,async:!1,cache:!1,contentType:!1,enctype:"multipart/form-data",processData:!1,statusCode:{413:function(){swal("Ooops!","The file size of your upload is above the requirements. Please note Audio File Size: 1MB, Video File Size: 1MB and Image File Size: 500KB","error")},415:function(){swal("Ooops!","The file type of your upload has an unsupported media type. Please note Audio File Type: mp3 only, Video File Type: mp4 only and Image File Size: jpg only.","error")}},success:function(e){swal({title:"Product Updated!",text:"Successfully updated your product. Redirecting you to view the product...",icon:"success",timer:2e3,button:!1,closeOnClickOutside:!1}).then(function(){window.location.href="/product/view?id="+o+"&token="+t})},error:function(e){(413!==e||415!==e)&&swal("Ooops!","Product failed to updated to Husk Root. Please try again later.","error")}})})});